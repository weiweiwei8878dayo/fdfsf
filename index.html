<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8"><title>IDç®¡ç†</title>
    <style>
        body { background: #0f172a; color: white; font-family: sans-serif; padding: 20px; }
        table { width: 100%; border-collapse: collapse; background: #1e293b; }
        th, td { border: 1px solid #334155; padding: 10px; text-align: left; }
        .ban { color: #ff4444; font-weight: bold; border: 1px solid #ff4444; padding: 2px 5px; }
    </style>
</head>
<body>
    <div id="main" style="display:none;">
        <h2>ğŸ“‹ é¡§å®¢ãƒ»ã«ã‚ƒã‚“ã“IDãƒªã‚¹ãƒˆ</h2>
        <table id="table">
            <thead><tr><th>æ—¥ä»˜</th><th>åå‰</th><th>ID</th><th>é‡‘é¡</th><th>BANä¿è¨¼</th></tr></thead>
            <tbody id="body"></tbody>
        </table>
    </div>
    <div id="err">ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</div>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const pass = urlParams.get('id');

        if (pass === 'yudai2011') {
            document.getElementById('err').style.display = 'none';
            document.getElementById('main').style.display = 'block';
            fetch(`/.netlify/functions/get-ids?pw=${pass}`)
                .then(res => res.json())
                .then(data => {
                    document.getElementById('body').innerHTML = data.reverse().map(item => `
                        <tr>
                            <td>${new Date(item.date).toLocaleDateString()}</td>
                            <td>${item.userName}</td>
                            <td><code>${item.userId}</code></td>
                            <td>${item.amount}å††</td>
                            <td>${item.banOption === 'yes' ? '<span class="ban">ğŸ›¡ï¸ è¦äºˆå‚™å¢</span>' : 'ãªã—'}</td>
                        </tr>
                    `).join('');
                });
        }
    </script>
</body>
</html>
